general:
    artifacts:
        - /home/ubuntu/Android-ActivitySync/app/build/outputs/apk/

machine:
    java:
        version: openjdk8

machine:
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
        JAVA7_HOME: /usr/lib/jvm/java-7-openjdk-amd64
        JAVA8_HOME: /usr/lib/jvm/java-8-openjdk-amd64
        JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64
        GRADLE_OPTS: '-Dorg.gradle.jvmargs="-Xmx2048m -XX:+HeapDumpOnOutOfMemoryError"'

dependencies:
    override:
        - echo y | android update sdk -u -a -t android-25
        - echo y | android update sdk -u -a -t platform-tools
        - echo y | android update sdk -u -a -t build-tools-25.0.1
        - echo y | android update sdk -u -a -t extra-android-m2repository
        - echo y | android update sdk -u -a -t addon-google_apis-google-25

test:
    override:
        - (chmod +x gradlew)
        - (./gradlew test):
            timeout: 600
        - (./gradlew assemble):
            timeout: 600